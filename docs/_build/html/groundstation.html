<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Autopilot API endpoints &mdash; CUAir Autopilot Documentation v1.0</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="CUAir Autopilot Documentation v1.0" href="index.html" />
    <link rel="prev" title="Autopilot documentation" href="index.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="autopilot-api-endpoints">
<h1>Autopilot API endpoints<a class="headerlink" href="#autopilot-api-endpoints" title="Permalink to this headline">¶</a></h1>
<p>The API for communicating between the autopilot and the ground station.</p>
<div class="section" id="status-status">
<h2>Status [/status]<a class="headerlink" href="#status-status" title="Permalink to this headline">¶</a></h2>
<p>Get the status of the plane: A large json containing each piece of data as a name/value pair. A call can also be made to /status/... to receive an
individual bit of data (below):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Response</span> <span class="mi">200</span> <span class="p">(</span><span class="n">application</span><span class="o">/</span><span class="n">json</span><span class="p">)</span>
      <span class="p">{</span>
          <span class="s2">&quot;attitude&quot;</span> <span class="p">:</span> <span class="p">{</span>
              <span class="s2">&quot;pitch&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
              <span class="s2">&quot;yaw&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
              <span class="s2">&quot;roll&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
              <span class="s2">&quot;pitchspeed&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
              <span class="s2">&quot;yawspeed&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
              <span class="s2">&quot;rollspeed&quot;</span> <span class="p">:</span> <span class="mf">0.0</span>
              <span class="p">},</span>
          <span class="s2">&quot;battery&quot;</span> <span class="p">:</span> <span class="p">{</span>
              <span class="s2">&quot;pct&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
              <span class="s2">&quot;voltage&quot;</span> <span class="p">:</span> <span class="mf">0.0</span>
              <span class="p">},</span>

          <span class="s2">&quot;link&quot;</span> <span class="p">:</span> <span class="p">{</span>
              <span class="s2">&quot;gps_link&quot;</span> <span class="p">:</span> <span class="s2">&quot;True&quot;</span><span class="p">,</span>
              <span class="s2">&quot;plane_link&quot;</span> <span class="p">:</span> <span class="s2">&quot;True&quot;</span>
              <span class="p">},</span>

          <span class="s2">&quot;time&quot;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>

          <span class="s2">&quot;gps&quot;</span> <span class="p">:</span> <span class="p">{</span>
              <span class="s2">&quot;rel_alt&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
              <span class="s2">&quot;asl_alt&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
              <span class="s2">&quot;lat&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
              <span class="s2">&quot;lon&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
              <span class="s2">&quot;heading&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
              <span class="s2">&quot;vx&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
              <span class="s2">&quot;vy&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
              <span class="s2">&quot;vz&quot;</span> <span class="p">:</span> <span class="mf">0.0</span>
          <span class="p">},</span>
          <span class="s2">&quot;mode&quot;</span><span class="p">:</span> <span class="s2">&quot;AUTO&quot;</span><span class="p">,</span>
          <span class="s2">&quot;airspeed&quot;</span> <span class="p">:</span> <span class="p">{</span>
              <span class="s2">&quot;vx&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
              <span class="s2">&quot;vy&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
              <span class="s2">&quot;vz&quot;</span> <span class="p">:</span> <span class="mf">0.0</span>
          <span class="p">},</span>

          <span class="s2">&quot;wind&quot;</span> <span class="p">:</span> <span class="p">{</span>
              <span class="s2">&quot;vx&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
              <span class="s2">&quot;vy&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
              <span class="s2">&quot;vz&quot;</span> <span class="p">:</span> <span class="mf">0.0</span>
          <span class="p">},</span>

          <span class="s2">&quot;throttle&quot;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>

          <span class="s2">&quot;waypoints&quot;</span> <span class="p">:</span> <span class="p">[{</span>
              <span class="s2">&quot;alt&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
              <span class="s2">&quot;lon&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
              <span class="s2">&quot;lat&quot;</span> <span class="p">:</span> <span class="mf">0.0</span>
          <span class="p">}],</span>

          <span class="s2">&quot;wp_count&quot;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
          <span class="s2">&quot;current_wp&quot;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
          <span class="s2">&quot;geofences&quot;</span> <span class="p">:</span>  <span class="p">[{</span>
              <span class="s2">&quot;lat&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
              <span class="s2">&quot;lon&quot;</span> <span class="p">:</span> <span class="mf">0.0</span>
          <span class="p">}],</span>
          <span class="s2">&quot;hud&quot;</span> <span class="p">:</span> <span class="p">{</span>
          <span class="s2">&quot;airspeed&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
          <span class="s2">&quot;groudspeed&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
          <span class="s2">&quot;heading&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
          <span class="s2">&quot;throttle&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
          <span class="s2">&quot;alt&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
          <span class="s2">&quot;climb&quot;</span><span class="p">:</span> <span class="mf">0.0</span>
          <span class="p">}</span>
      <span class="p">}</span>
</pre></div>
</div>
<div class="section" id="attitude-status-attitude">
<h3>Attitude [/status/attitude]<a class="headerlink" href="#attitude-status-attitude" title="Permalink to this headline">¶</a></h3>
<p>Returns the plane&#8217;s attitude, containing:</p>
<ul class="simple">
<li>Pitch [float]</li>
<li>Yaw [float]</li>
<li>Roll [float]</li>
<li>Pitchspeed [float]</li>
<li>Yawspeed [float]</li>
<li>Rollspeed [float]</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">+</span> <span class="n">Response</span> <span class="mi">200</span> <span class="p">(</span><span class="n">application</span><span class="o">/</span><span class="n">json</span><span class="p">)</span>
<span class="p">{</span>
   <span class="s2">&quot;pitch&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
   <span class="s2">&quot;yaw&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
   <span class="s2">&quot;roll&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
   <span class="s2">&quot;pitchspeed&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
   <span class="s2">&quot;yawspeed&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
   <span class="s2">&quot;rollspeed&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="battery-status-battery">
<h3>Battery [/status/battery]<a class="headerlink" href="#battery-status-battery" title="Permalink to this headline">¶</a></h3>
<p>Returns the current state of the plane&#8217;s battery, containing:</p>
<ul class="simple">
<li>pct [float]</li>
<li>voltage [float]</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">+</span> <span class="n">Response</span> <span class="mi">200</span> <span class="p">(</span><span class="n">application</span><span class="o">/</span><span class="n">json</span><span class="p">)</span>
       <span class="p">{</span>
           <span class="s2">&quot;pct&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
           <span class="s2">&quot;voltage&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
       <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="link-status-link">
<h3>Link [/status/link]<a class="headerlink" href="#link-status-link" title="Permalink to this headline">¶</a></h3>
<p>Returns the status of links, containing:</p>
<ul class="simple">
<li>gps_link [boolean]</li>
<li>plane_link [boolean]</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">+</span> <span class="n">Response</span> <span class="mi">200</span> <span class="p">(</span><span class="n">application</span><span class="o">/</span><span class="n">json</span><span class="p">)</span>
       <span class="p">{</span>
           <span class="s2">&quot;gps_link&quot;</span> <span class="p">:</span> <span class="s2">&quot;True&quot;</span><span class="p">,</span>
           <span class="s2">&quot;plane_link&quot;</span> <span class="p">:</span> <span class="s2">&quot;True&quot;</span><span class="p">,</span>
       <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="time-status-time">
<h3>Time [/status/time]<a class="headerlink" href="#time-status-time" title="Permalink to this headline">¶</a></h3>
<p>Returns the current time as an long representing a [unix timestamp](<a class="reference external" href="https://en.wikipedia.org/wiki/Unix_time">https://en.wikipedia.org/wiki/Unix_time</a>)</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">+</span> <span class="n">Response</span> <span class="mi">200</span> <span class="p">(</span><span class="n">application</span><span class="o">/</span><span class="n">json</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="mi">0</span>
      <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="gps-status-gps">
<h3>GPS [/status/gps]<a class="headerlink" href="#gps-status-gps" title="Permalink to this headline">¶</a></h3>
<p>Returns various values from the plane&#8217;s onboard GPS, containing:</p>
<ul class="simple">
<li>rel_alt [float]</li>
<li>asl_alt [float]</li>
<li>lat [float]</li>
<li>lon [float]</li>
<li>heading [float]</li>
<li>vx [float]</li>
<li>vy [float]</li>
<li>vz [float]</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">+</span> <span class="n">Response</span> <span class="mi">200</span> <span class="p">(</span><span class="n">application</span><span class="o">/</span><span class="n">json</span><span class="p">)</span>
      <span class="p">{</span>
          <span class="s2">&quot;rel_alt&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
          <span class="s2">&quot;asl_alt&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
          <span class="s2">&quot;lat&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
          <span class="s2">&quot;lon&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
          <span class="s2">&quot;heading&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
          <span class="s2">&quot;vx&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
          <span class="s2">&quot;vy&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
          <span class="s2">&quot;vz&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
      <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="mode-status-mode">
<h3>Mode [/status/mode]<a class="headerlink" href="#mode-status-mode" title="Permalink to this headline">¶</a></h3>
<p>Returns the current flying mode of the plane as a string, e.g. &#8220;AUTO&#8221;, &#8220;MANUAL&#8221;, &#8220;FLY_BY_WIRE_A&#8221;</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Response</span> <span class="mi">200</span> <span class="p">(</span><span class="n">application</span><span class="o">/</span><span class="n">json</span><span class="p">)</span>
       <span class="p">{</span>
          <span class="s2">&quot;AUTO&quot;</span>
       <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="airspeed-status-airspeed">
<h3>Airspeed [/status/airspeed]<a class="headerlink" href="#airspeed-status-airspeed" title="Permalink to this headline">¶</a></h3>
<p>Returns vectors vx, vy, vz representing the airspeed velocity of the airplane as floats</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">+</span> <span class="n">Response</span> <span class="mi">200</span> <span class="p">(</span><span class="n">application</span><span class="o">/</span><span class="n">json</span><span class="p">)</span>
       <span class="p">{</span>
           <span class="s2">&quot;vx&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
           <span class="s2">&quot;vy&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
           <span class="s2">&quot;vz&quot;</span> <span class="p">:</span> <span class="mf">0.0</span>
       <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="wind-status-wind">
<h3>Wind [/status/wind]<a class="headerlink" href="#wind-status-wind" title="Permalink to this headline">¶</a></h3>
<p>Returns vectors vx, vy, vz representing the wind velocity vector as floats</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Response</span> <span class="mi">200</span> <span class="p">(</span><span class="n">application</span><span class="o">/</span><span class="n">json</span><span class="p">)</span>
       <span class="p">{</span>
           <span class="s2">&quot;vx&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
           <span class="s2">&quot;vy&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
           <span class="s2">&quot;vz&quot;</span> <span class="p">:</span> <span class="mf">0.0</span>
       <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="throttle-status-throttle">
<h3>Throttle [/status/throttle]<a class="headerlink" href="#throttle-status-throttle" title="Permalink to this headline">¶</a></h3>
<p>An integer from 0 to 100 representing the current throttle level of the plane</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Response</span> <span class="mi">200</span> <span class="p">(</span><span class="n">application</span><span class="o">/</span><span class="n">json</span><span class="p">)</span>
       <span class="p">{</span>
           <span class="mi">0</span>
       <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="waypoints-status-waypoints">
<h3>Waypoints [/status/waypoints]<a class="headerlink" href="#waypoints-status-waypoints" title="Permalink to this headline">¶</a></h3>
<p>Returns a list of JSON objects representing the current waypoints altitude, latitude, and longitude</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">+</span> <span class="n">Response</span> <span class="mi">200</span> <span class="p">(</span><span class="n">application</span><span class="o">/</span><span class="n">json</span><span class="p">)</span>
       <span class="p">[{</span>
               <span class="s2">&quot;alt&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
               <span class="s2">&quot;lon&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
               <span class="s2">&quot;lat&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
       <span class="p">}]</span>
</pre></div>
</div>
</div>
<div class="section" id="waypoint-count-status-wp-count">
<h3>Waypoint Count [/status/wp_count]<a class="headerlink" href="#waypoint-count-status-wp-count" title="Permalink to this headline">¶</a></h3>
<p>Returns an integer representing the current number of waypoints</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">+</span> <span class="n">Response</span> <span class="mi">200</span> <span class="p">(</span><span class="n">application</span><span class="o">/</span><span class="n">json</span><span class="p">)</span>
       <span class="p">{</span>
           <span class="mi">0</span>
       <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="current-waypoint-status-current-wp">
<h3>Current Waypoint [/status/current_wp]<a class="headerlink" href="#current-waypoint-status-current-wp" title="Permalink to this headline">¶</a></h3>
<p>Returns an integer representing the current waypoint</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">+</span> <span class="n">Response</span> <span class="mi">200</span> <span class="p">(</span><span class="n">application</span><span class="o">/</span><span class="n">json</span><span class="p">)</span>

       <span class="p">{</span>
           <span class="mi">0</span>
       <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="geofence-status-geofences">
<h3>Geofence [/status/geofences]<a class="headerlink" href="#geofence-status-geofences" title="Permalink to this headline">¶</a></h3>
<p>Returns a list of JSON objects representing the latitude and longitude of the geofences</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Response</span> <span class="mi">200</span> <span class="p">(</span><span class="n">application</span><span class="o">/</span><span class="n">json</span><span class="p">)</span>
       <span class="p">[{</span>
           <span class="s2">&quot;lat&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
           <span class="s2">&quot;lon&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
       <span class="p">}]</span>
</pre></div>
</div>
</div>
<div class="section" id="hud-status-hud">
<h3>HUD [/status/hud]<a class="headerlink" href="#hud-status-hud" title="Permalink to this headline">¶</a></h3>
<p>Returns a list of values needed for the HUD, containing,</p>
<ul class="simple">
<li>airspeed [float]</li>
<li>groundspeed [float]</li>
<li>heading [integer]</li>
<li>throttle [integer]</li>
<li>alt [float]</li>
<li>climb [float]</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Response</span> <span class="mi">200</span> <span class="p">(</span><span class="n">application</span><span class="o">/</span><span class="n">json</span><span class="p">)</span>
       <span class="p">{</span>
           <span class="s2">&quot;airspeed&quot;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
           <span class="s2">&quot;groudspeed&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
           <span class="s2">&quot;heading&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
           <span class="s2">&quot;throttle&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
           <span class="s2">&quot;alt&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
           <span class="s2">&quot;climb&quot;</span><span class="p">:</span> <span class="mf">0.0</span>
       <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="software-status-status-softstatus-time-time">
<h3>Software Status [/status/softstatus?time=TIME]<a class="headerlink" href="#software-status-status-softstatus-time-time" title="Permalink to this headline">¶</a></h3>
<p>Use the GET argument &#8220;time&#8221; (/status/softstatus?time=TIME) to request a status at a specific time. If an exact value is not available, an interoplated value will be provided.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Response</span> <span class="mi">200</span> <span class="p">(</span><span class="n">application</span><span class="o">/</span><span class="n">json</span><span class="p">)</span>
       <span class="p">{</span>
       <span class="n">attitude</span><span class="p">:</span> <span class="p">{</span>
           <span class="s1">&#39;roll&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
           <span class="s1">&#39;pitch&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
           <span class="s1">&#39;yaw&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
           <span class="s1">&#39;rollspeed&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
           <span class="s1">&#39;yawspeed&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
           <span class="s1">&#39;pitchspeed&#39;</span><span class="p">:</span> <span class="mi">0</span>

       <span class="p">},</span>
       <span class="n">gps</span><span class="p">:{</span>
            <span class="n">lat</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="n">lon</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="n">asl_alt</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="n">vx</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="n">vy</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="n">vz</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="n">heading</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="n">rel_alt</span><span class="p">:</span> <span class="mi">0</span>
        <span class="p">},</span>
        <span class="n">airspeed</span><span class="p">:{</span>
            <span class="s1">&#39;vx&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;vy&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;vz&#39;</span><span class="p">:</span> <span class="mi">0</span>
        <span class="p">},</span>
        <span class="n">wind</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;vx&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;vy&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;vz&#39;</span><span class="p">:</span> <span class="mi">0</span>
        <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="ground-station">
<h1>Ground Station<a class="headerlink" href="#ground-station" title="Permalink to this headline">¶</a></h1>
<p>This section describes the use and design of the autopilot ground station</p>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="setup-with-plane">
<h2>Setup with plane<a class="headerlink" href="#setup-with-plane" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="setup-with-sitl">
<h2>Setup with SITL<a class="headerlink" href="#setup-with-sitl" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="using-the-front-end">
<h2>Using the front end<a class="headerlink" href="#using-the-front-end" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="interoperability">
<h2>Interoperability<a class="headerlink" href="#interoperability" title="Permalink to this headline">¶</a></h2>
<div class="section" id="setup">
<h3>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://auvsi-suas-competition-interoperability-system.readthedocs.io/en/latest/">See the Judge&#8217;s server interoperability documentation here.</a></p>
</div>
<div class="section" id="interoperability-use">
<h3>Interoperability Use<a class="headerlink" href="#interoperability-use" title="Permalink to this headline">¶</a></h3>
<div class="section" id="mavproxy-ground-station-use">
<h4>MAVProxy/Ground Station use<a class="headerlink" href="#mavproxy-ground-station-use" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li>Enter the correct username, password, and url (include the http: and the port (usually 8000) in the settings tab of gcs2</li>
<li>Hit &#8220;Toggle Interop&#8221; to activate server</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>You should see &#8220;interop server started&#8221; printed on the MAVProxy console and get a green success status message on the ground station</li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="3">
<li>To stop, hit &#8220;Toggle Interop&#8221; again</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>You should see &#8220;interop server stopped&#8221; printed on the MAVProxy console and get a green success status message on the ground station</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="judge-s-server-use">
<h4>Judge&#8217;s Server use<a class="headerlink" href="#judge-s-server-use" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><a class="reference external" href="http://auvsi-suas-competition-interoperability-system.readthedocs.io/en/latest/">See the Judge&#8217;s server interoperability documentation here.</a></div></blockquote>
</div>
</div>
<div class="section" id="interoperability-design">
<h3>Interoperability Design<a class="headerlink" href="#interoperability-design" title="Permalink to this headline">¶</a></h3>
<div class="section" id="system-design">
<h4>System Design<a class="headerlink" href="#system-design" title="Permalink to this headline">¶</a></h4>
<p>The backend is designed with 3 main components - the API, which provides a REST API for the front end to control and query the backend, the backend itself, which sends information to and retrieves information from the judge&#8217;s server, and the test suite, which tests the functionality of the backend.</p>
<img alt="_images/interop_flowchart.png" src="_images/interop_flowchart.png" />
<div class="section" id="api">
<h5>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h5>
<blockquote>
<div><p><strong>Location:</strong> modules/server/views/interop_api.py</p>
<p>The program creates a flask server to serve data to the front end and other subteams. It retrieves data related to interoperability from the MAVProxy.modules.server.data file. It also contains an endpoint to start and stop the backend.</p>
<p>When multiple endpoints are listed, both are valid - the second is the newest is is preferred. Other endpoints not listed here in code are deprecated.</p>
<p><strong>Endpoints</strong></p>
<blockquote>
<div><ul>
<li><dl class="first docutils">
<dt><strong>Server Control</strong> (/v1/interop) (/ground/api/v3/interop)</dt>
<dd><ul class="first last">
<li><p class="first"><strong>POST</strong></p>
<p>Sending a POST request to this endpoint starts the interop backend. To do this, it creates a new instance of the backend object, then starts the backend on a separate thread and sets the server to active. It will fail if the server is either already started, or if it has been less that a half second since the server was either started or stopped last. Requires a valid JSON containing the server data (username, password, and url fields). Requires a valid auth token to</p>
</li>
<li><p class="first"><strong>DELETE</strong></p>
<p>Sending a DELETE request to this endpoint will stop the interop backend. It simply sets the Data.server_active global variable to false. This is the loop condition on the backend, so the server will stop as soon as it completes its current loop. This will fail if the server is either already stopped or if it has been less that a half second since the server was either started or stopped last. Requires a valid auth token to access</p>
</li>
<li><p class="first"><strong>GET</strong></p>
<p>Returns a JSON string containing the obstacle data and server info</p>
</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first"><strong>Obstacles</strong> (/v1/interop/obstacles) (/ground/api/v3/interop/obstacles)</p>
<p>Returns a JSON object string that contains a list of both moving and stationary objects. Checks to see if the server is active, and, if so, retrieves data from the MAVProxy.modules.server.data module, jsonifies it and returns it</p>
</li>
<li><p class="first"><strong>Server Info</strong> (/v1/interop/server_info) (/ground/api/v3/interop/server_info)</p>
<p>Returns a JSON object string that contains the server message, message timestamp, and the server time at last retrieval. Checks to see if the server is active, and, if so, retrieves data from the MAVProxy.modules.server.data module, jsonifies it and returns it.</p>
</li>
<li><p class="first"><strong>Time</strong> (/v1/interop/time) (/ground/api/v3/interop/time)</p>
<p>Returns a single string that represents the server time at last retrieval. Checks to see if the server is active, and, if so, retrieves data from the MAVProxy.modules.server.dat&#8217;a module, then returns it as a raw string</p>
</li>
</ul>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="mavproxy-backend">
<h5>MAVProxy Backend<a class="headerlink" href="#mavproxy-backend" title="Permalink to this headline">¶</a></h5>
<blockquote>
<div><p><strong>Location:</strong> modules/server/interop.py</p>
<p>This program is the script that does the work of  sending telemetry data to the judge’s interoperability server and retrieving data about the server and obstacles to store for other MAVProxy modules.</p>
<dl class="docutils">
<dt><strong>Global Variables</strong></dt>
<dd><ul class="first last">
<li><p class="first"><strong>TRIES_BEFORE_FAILURE</strong></p>
<p>The number of consecutive telemetry failures the system will accept before warning the user the telemetry is down. System will automatically warn the user every time a single telemetry request fails regardless, but will not display as down until reaching this cap</p>
</li>
<li><p class="first"><strong>RUN_TESTS</strong></p>
<p>Uncomment this to run test cases. This will cause the url to be overwritten with the url used to run test cases</p>
</li>
<li><p class="first"><strong>FEET_TO_METERS_FACTOR</strong></p>
<p>The factor to multiply a value in feet by to get a value in meters</p>
</li>
</ul>
</dd>
</dl>
<p><strong>Methods</strong></p>
<ul>
<li><p class="first"><strong>__init__(self)</strong></p>
<p>Establishes a connection with the interop server and starts a session by logging in with the specified credentials. The server returns cookies after login, which are stored in the self.session variable and will be used every time a request is sent by this object</p>
</li>
<li><p class="first"><strong>start(self)</strong></p>
<p>Spawns two threads that send telemetry data and retrieve server and obstacle data. After spawning, it checks every second to see if the server has stopped, and if so, prints that to the console then exits.</p>
</li>
<li><p class="first"><strong>get(self)</strong></p>
<p>Will never be called on the main thread, this method is called as its own thread by the start method. It calculates the period (time between requests), then loops on the server_active condition. It sleeps until it is time to send a new request, sends that request, then stores the response in Data.pdata.</p>
</li>
<li><p class="first"><strong>post(self)</strong></p>
<p>Will never be called on the main thread, this method is called as its own thread by the start method. It calculates the period (time between requests), giving it a fudge factor of 10% as it does to ensure that the average telemetry send rate stays well above the required number. It then sleeps until it is time to send a bit of data. When it is time, it grabs the necessary data from the Data.pdata object, then sends the http request to the interop server on a separate thread. This is done asynchronously so we do not have to wait for a response and can continue at the proper speed even if the server is running slowly.</p>
</li>
<li><p class="first"><strong>send_telemetry(self, telemetry_data)</strong></p>
<p>Sends the telemetry data as an http request to the judge’s server. Afterwards, it checks the status of the request and increments the failures if necessary.</p>
</li>
<li><p class="first"><strong>initialize_history(self, obstacles)</strong></p>
<p>Initializes the recorded history of obstacle data for use by SDA.</p>
</li>
<li><p class="first"><strong>meters_to_feet(meters)</strong></p>
<p>Converts a float from a value in meters to a value in feet</p>
</li>
<li><p class="first"><strong>feet_to_meters(feet)</strong></p>
<p>Converts a float from a value in feet to a value in meters</p>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="test-suite">
<h5>Test Suite<a class="headerlink" href="#test-suite" title="Permalink to this headline">¶</a></h5>
<blockquote>
<div><p><strong>Location:</strong> /modules/server/interop_test_cases.py</p>
<p>This is the test suite that is used for testing the interop backend. It simulates the judge’s interoperability server on the machine, serves up simulated server data and obstacles, and accepts telemetry requests. It then performs a number of tests to ensure that the data was received and store properly, and the the telemetry data received is formatted correctly and being sent quickly enough.</p>
<p><strong>Running the test suite</strong></p>
<ol class="arabic simple">
<li>In the backend (/modules/server/interop.py), set RUN_TESTS to True</li>
<li>In the API (modules/server/views/interop_api.py), set RUN_TESTS to True</li>
<li>Run MAVProxy normally, then from the front end hit “toggle interop”</li>
<li>Review console printout (should take about 100 seconds to run to completion)</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>Upon completion, type ‘reset’ to fix the console.</li>
</ul>
</div></blockquote>
</div></blockquote>
</div>
</div>
<div class="section" id="competition-rules">
<h4>Competition rules<a class="headerlink" href="#competition-rules" title="Permalink to this headline">¶</a></h4>
<p>Below are the rules that govern interoperability for the competition. The interoperability system is made to comply with these rules..</p>
<dl class="docutils">
<dt><strong>5.3.1.</strong> As a flight‐mission demonstration requirement, teams shall upload the UAS autopilot telemetry (TM) data (position, altitude, and related attributes) to support scoring using the interoperability system</dt>
<dd><strong>5.3.1.3.</strong> If the team&#8217;s system cannot provide TM data to the judges using the interoperability system they will not be allowed to fly ‐ just like if they had not displays to show the judges&#8217; the air vehicles position.</dd>
</dl>
<p><strong>5.3.2.</strong> The UAS shall upload this TM data at a target rate of 10Hz from the first takeoff until the last landing.  If the average rate of upload across all flight periods is below 8 Hz, the team will receive no points for the mission demonstration.  The difference between 10 Hz and 8 Hz is intended to allow for short and temporary data link outages.</p>
<p><strong>5.3.3.</strong> Data dropouts, which impact the ability for the judges to use the telemetry data to judge mission components, will be counted against the team.  For example, if data dropout makes it unclear whether waypoints were captured within 50ft and in order, it will be assumed the team did not do so. If the data dropout occurs near a flight zone boundary, it will be assumed the team spent the entire time out of bounds.  If the data dropout occurs near obstacles, it will be assumed those obstacles were hit.  For data dropout evaluation, it will be assumed the UAS traveled at the maximum allowed competition airspeed (100 KIAS).</p>
<p><strong>5.3.4.</strong> The UAS may upload the position whenever the interoperability network is available, and is not restricted to airborne flight periods.  Teams should also upload position whenever the UAS occupies the runway.</p>
<p><strong>5.3.5.</strong> Data uploaded shall be genuine autopilot flight telemetry data which is not interpolated, extrapolated, duplicated, simulated, or otherwise edited by team&#8217;s code/operators before being passed to the interoperability system.  The data must be generated by the autopilot at 10Hz, or greater, and thus the UAS will need sensors and data links which can support sufficient data rates.</p>
<p><strong>7.9.6.</strong> Display Obstacles.  There are virtual obstacles for the Sense, Detect, and Avoid (SDA) task.  The positions and sizes of the obstacles are provided by the interoperability server.  This information shall be downloaded and displayed at the same UAS autopilot operator interface (e.g. the same laptop), used in the Ground Control Station.  These obstacles shall be displayed in a view that also shows the UAS position, the mission boundaries, the task positions, and the UAS’ waypoints.   This view does not need to be the autopilot interface (e.g. the desktop application)</p>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Autopilot API endpoints</a><ul>
<li><a class="reference internal" href="#status-status">Status [/status]</a><ul>
<li><a class="reference internal" href="#attitude-status-attitude">Attitude [/status/attitude]</a></li>
<li><a class="reference internal" href="#battery-status-battery">Battery [/status/battery]</a></li>
<li><a class="reference internal" href="#link-status-link">Link [/status/link]</a></li>
<li><a class="reference internal" href="#time-status-time">Time [/status/time]</a></li>
<li><a class="reference internal" href="#gps-status-gps">GPS [/status/gps]</a></li>
<li><a class="reference internal" href="#mode-status-mode">Mode [/status/mode]</a></li>
<li><a class="reference internal" href="#airspeed-status-airspeed">Airspeed [/status/airspeed]</a></li>
<li><a class="reference internal" href="#wind-status-wind">Wind [/status/wind]</a></li>
<li><a class="reference internal" href="#throttle-status-throttle">Throttle [/status/throttle]</a></li>
<li><a class="reference internal" href="#waypoints-status-waypoints">Waypoints [/status/waypoints]</a></li>
<li><a class="reference internal" href="#waypoint-count-status-wp-count">Waypoint Count [/status/wp_count]</a></li>
<li><a class="reference internal" href="#current-waypoint-status-current-wp">Current Waypoint [/status/current_wp]</a></li>
<li><a class="reference internal" href="#geofence-status-geofences">Geofence [/status/geofences]</a></li>
<li><a class="reference internal" href="#hud-status-hud">HUD [/status/hud]</a></li>
<li><a class="reference internal" href="#software-status-status-softstatus-time-time">Software Status [/status/softstatus?time=TIME]</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#ground-station">Ground Station</a><ul>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#setup-with-plane">Setup with plane</a></li>
<li><a class="reference internal" href="#setup-with-sitl">Setup with SITL</a></li>
<li><a class="reference internal" href="#using-the-front-end">Using the front end</a></li>
<li><a class="reference internal" href="#interoperability">Interoperability</a><ul>
<li><a class="reference internal" href="#setup">Setup</a></li>
<li><a class="reference internal" href="#interoperability-use">Interoperability Use</a><ul>
<li><a class="reference internal" href="#mavproxy-ground-station-use">MAVProxy/Ground Station use</a></li>
<li><a class="reference internal" href="#judge-s-server-use">Judge&#8217;s Server use</a></li>
</ul>
</li>
<li><a class="reference internal" href="#interoperability-design">Interoperability Design</a><ul>
<li><a class="reference internal" href="#system-design">System Design</a><ul>
<li><a class="reference internal" href="#api">API</a></li>
<li><a class="reference internal" href="#mavproxy-backend">MAVProxy Backend</a></li>
<li><a class="reference internal" href="#test-suite">Test Suite</a></li>
</ul>
</li>
<li><a class="reference internal" href="#competition-rules">Competition rules</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Autopilot documentation</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/groundstation.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, CUAIR.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.7</a>
      
      |
      <a href="_sources/groundstation.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>